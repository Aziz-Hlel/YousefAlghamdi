ygp.ae { # Replace with your actual domain
    # Compress responses
    encode gzip zstd

    # --- API Backend Proxy ---
    # Directly proxy paths starting with /api/
    # Ensure 'server:5000' is correct.
    reverse_proxy /api/* server:5000

    # --- SPA Frontend Handling ---
    # Root directory for your frontend build files
    root * /srv
    # Try to serve the requested file. If not found, serve /index.html (for SPA routing).
    # This must come BEFORE file_server if you want it to act as a fallback for non-existent files.
    # However, for a pure SPA setup where non-API calls that aren't files go to index.html,
    # Caddy's file_server can often handle this with a try_files subdirective,
    # or you can structure it like this:
    try_files {path} /index.html
    file_server
}