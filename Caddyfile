ygp.ae {  # Replace with your actual domain
    root * /srv
    
    log {
        output file /var/log/caddy/access.log
        format json
        level ERROR
    }
    
    @api path /api/*
    reverse_proxy @api server:5000 #{
   #     health_uri /health
   #     health_interval 30s
   #     health_timeout 5s
   #     fail_duration 10s
   #     
   #     lb_policy round_robin
   #     
   #     header_up Host {upstream_hostport}
   #     header_up X-Real-IP {remote}
   #     header_up X-Forwarded-For {remote}
   #     header_up X-Forwarded-Proto {scheme}
   # }
    
    @spa {
        not path /api/*
        not file
    }
    rewrite @spa /index.html
    

    
    @html {
        path_regexp \.html$
    }
    

    
    # Auto HTTPS with Let's Encrypt
    tls {
        protocols tls1.2 tls1.3
    }
    

}